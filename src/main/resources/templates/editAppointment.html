<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.com">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>User Edit Details Form</title>
<style>
body {
	font-family: Arial, sans-serif;
	background-color: #f2f2f2;
	display: flex;
	justify-content: center;
	align-items: center;
	height: 100vh;
	margin: 0;
}

.container {
	background-color: #fff;
	padding: 20px;
	border-radius: 8px;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
	width: 300px;
}

h2 {
	text-align: center;
	margin-bottom: 20px;
}

form {
	display: flex;
	flex-direction: column;
}

label {
	margin-bottom: 5px;
}

input, select, button {
	margin-bottom: 15px;
	padding: 10px;
	border: 1px solid #ccc;
	border-radius: 4px;
}

input[type="number"] {
	-moz-appearance: textfield;
}

input[type="number"]::-webkit-outer-spin-button, input[type="number"]::-webkit-inner-spin-button
	{
	-webkit-appearance: none;
	margin: 0;
}

button {
	background-color: #4CAF50;
	color: white;
	cursor: pointer;
	border: none;
}

button:hover {
	background-color: #45a049;
}
</style>
</head>
<body>
	<div class="container">
		<h2>User Edit Details Form</h2>
		<form th:action="@{/update}" method="post" >
		   <label for="id">id:</label>
            <input type="hidden" name="id" th:value="${appointment.id}">
              <input type="hidden" name="username" th:value="${username}" />
              
             <label for="firstName">First Name:</label>
    <input type="text" id="firstName" name="firstName" th:value="${appointment.firstName}" required />
    
    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" name="lastName" th:value="${appointment.lastName}" required />
    
    <label for="phoneNumber">Phone Number:</label>
    <input type="text" id="phoneNumber" name="phoneNumber" th:value="${appointment.phoneNumber}" required />
    
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" th:value="${appointment.email}" required />
    
    <label for="age">Age:</label>
    <input type="number" id="age" name="age" th:value="${appointment.age}" required />
    
    <label for="gender">Gender:</label>
    <input type="text" id="gender" name="gender" th:value="${appointment.gender}" required />
    
    <label for="weight">Weight:</label>
    <input type="number" id="weight" name="weight" step="0.01" th:value="${appointment.weight}" required />
    
    <button type="submit">Update Appointment</button>
        </form>
        <div th:if="${errorMessage}">
        <p th:text="${errorMessage}"></p>
    </div>
	</div>
	<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        // Replace with the actual ID you want to update
        const recordId = 'id';
        fetch(`/arecord/${recordId}`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('id').value = data.id;
                document.getElementById('firstName').value = data.firstName;
                document.getElementById('lastName').value = data.lastName;
                document.getElementById('phonenumber').value = data.phonenumber;
                document.getElementById('email').value = data.email;
                document.getElementById('age').value = data.age;
                document.getElementById('gender').value = data.gender;
                document.getElementById('weight').value = data.weight;
            })
            .catch(error => console.error('Error:', error));
    });
    
        function updateRecord() {
            const form = document.getElementById('updateForm');
            const formData = new FormData(form);
            const data = {};
            formData.forEach((value, key) => {
                data[key] = value;
            });

            fetch('/api/update', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                alert('Record updated successfully!');
                // Handle the response data
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>
